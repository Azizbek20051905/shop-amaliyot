{% extends 'wrapper.html' %}

{% block content %}

    <div class="container-fluid">
        <!--  Row 1 -->

        <div class="col-lg-12 d-flex align-items-stretch mt-5">
          <div class="card w-100">
            <div class="card-body p-4">
                {% if page == "update" %}
                    <h5 class="card-title fw-semibold mb-4">Mahsulot malumotini o'zgartirish</h5>
                {% elif page == "add" %}
                    <h5 class="card-title fw-semibold mb-4">Mahsulot qo'shish</h5>
                {% endif %}
                <form 
                    {% if page == "add" %}
                        action="/products/add/" 
                    {% elif page == "update" %}
                        action="/update/{{ product.slug }}"
                    {% endif %}

                    method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="image w-100">
                        <label for="imageInput" style=" display: flex; justify-content: center; align-items: center; border: 2px solid #5D87FF; border-radius: 20px;
                        {% if page == "update" %}
                            background-image: url({{ product.image.url }}); 
                            width: 100%; height: 200px;
                        {% elif page == "add" %}
                            width: 100%; height: 200px;
                            background-image: url(https://storage.needpix.com/rsynced_images/banner-web-business-users-blue.jpg); 
                        {% endif %}

                        background-position: center; background-size: cover;">
                            <h2 class="text-white" style="font-weight: bold; font-size: 40px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; cursor: pointer;">
                                <i class="fa-solid fa-arrow-up-from-bracket"></i>
                                Rasm joylash
                            </h2>
                            <input type="file" hidden name="imageInput" id="imageInput">
                        </label>
                    </div>
                    <div class="form-group mb-3 mt-3">
                        <label for="NameInput">Mahsulot nomi</label>
                        <input type="text" name="NameInput" class="form-control" value="{{ product.name }}" id="NameInput" placeholder="Mahsulot nomi">
                    </div>
                    <div class="d-flex justify-content-between row">
                        <div class="form-group mb-3 w-50">
                            <label for="category">Mahsulot kategoriyasi</label>
                            <select name="category" id="category" class="form-select">
                                <option value="">Mahsulot turini tanlang</option>
                                {% for category in categories %}
                                    {% if category.slug == product.category.slug %}
                                        <option value="{{ category.slug }}" selected>{{ category.name }}</option>
                                    {% else %}
                                        <option value="{{ category.slug }}">{{ category.name }}</option>
                                    {% endif %}
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-group mb-3 w-50">
                            <label for="addCategory">Kategoriya qo'shish</label>
                            <input type="text" class="form-control" name="addCategory" id="addCategory"> 
                        </div>
                    </div>
                    <div class="form-group mb-3">
                        <label for="OldPriceInput">Kelgan narxi</label>
                        <input type="text" name="OldPriceInput" value="{{ product.old_price }}" class="form-control" id="OldPriceInput" placeholder="Kelgan narxi">
                    </div>
                    <div class="form-group mb-3">
                        <label for="SellPriceInput">Sotish narxi</label>
                        <input type="text" name="SellPriceInput" value="{{ product.sell_price }}" class="form-control" id="SellPriceInput" placeholder="Sotish narxi">
                    </div>
                    <div class="form-group mb-3">
                        <label for="AmountInput">Mahsulot Miqdori</label>
                        <input type="number" name="AmountInput" value="{{ product.amount }}" class="form-control" id="AmountInput" placeholder="Miqdorini kiriting">
                    </div>

                    <div class="form-group mb-3">
                        <label for="ProductType">Mahsulot turi</label>
                        <select name="ProductType" id="ProductType" class="form-select">
                            <option value="">Mahsulot turini tanlang</option>
                            {% if product.type == "dona" %}
                                <option value="dona" selected>Dona</option>
                                <option value="kg">Kg</option>
                            {% elif product.type == "kg" %}
                                <option value="dona">Dona</option>
                                <option value="kg" selected>Kg</option>
                            {% else %}
                                <option value="dona">Dona</option>
                                <option value="kg">Kg</option>
                            {% endif %}
                        </select>
                    </div>
                    <div class="nav-small-cap">
                        <i class="ti ti-dots nav-small-cap-icon fs-4"></i>
                        <span class="hide-menu">Ulgurji sotish</span>
                        <hr>
                    </div>
                    <br>
                    <div class="form-group mb-3">
                        <label for="ConvertWholeInput">Ulgurji sotish</label>
                        <select name="ConvertWholeInput" id="ConvertWholeInput" class="form-select">
                            <option value="">Ulgurji Mahsulot turini tanlang</option>
                            {% if product.wholesale == "block" %}
                                <option value="block" selected>Block</option>
                                <option value="karobka">Karobka</option>
                            {% elif product.wholesale == "karobka" %}
                                <option value="block">Block</option>
                                <option value="karobka" selected>Karobka</option>
                            {% else %}
                                <option value="block">Block</option>
                                <option value="karobka">Karobka</option>
                            {% endif %}
                        </select>
                    </div>
                    <div class="form-group mb-3">
                        <label for="ConvertAmountInput">Ulgurji Mahsulot Miqdori</label>
                        <input type="number" name="ConvertAmountInput" value="{{ product.blockAmount }}" class="form-control" id="ConvertAmountInput" placeholder="Block/karobkada miqdorini kiriting">
                    </div>
                    <div class="form-group mb-3">
                        <label for="ConvertPriceInput">Ulgurji Mahsulot Narxi</label>
                        <input type="number" name="ConvertPriceInput" value="{{ product.blockPrice }}" class="form-control" id="ConvertPriceInput" placeholder="Block/karobkada narxini kiriting">
                    </div>

                    <button class="btn btn-primary">Qo'shish</button>
                </form>
            </div>
          </div>
        </div>
      </div>
      <div class="py-6 px-6 text-center">
        <p class="mb-0 fs-4">Design and Developed by <a href="https://github.com/Azizbek20051905" target="_blank"
            class="pe-1 text-primary text-decoration-underline">Azizbek Ilhomjonov</a></p>
      </div>

{% endblock content %}

